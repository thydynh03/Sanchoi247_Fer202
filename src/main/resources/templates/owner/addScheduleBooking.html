<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Schedule</title>
    <script>
        // Function to show the next input field
        function showNextInput() {
            const inputs = document.querySelectorAll('.schedule-input');
            for (let i = 0; i < inputs.length; i++) {
                if (inputs[i].style.display === 'none') {
                    inputs[i].style.display = 'block';
                    break; // Hiển thị 1 ô rồi dừng
                }
            }
        }

        // Function to gather all filled inputs before submitting
        function gatherFilledInputs() {
            const inputs = document.querySelectorAll('input');
            let filledData = [];
            inputs.forEach(input => {
                if (input.value.trim() !== '' && input.type !== 'hidden') {
                    filledData.push({
                        name: input.name,
                        value: input.value
                    });
                }
            });
            console.log(filledData); // In ra để kiểm tra dữ liệu
            return filledData;
        }

        // Event listener to handle form submission
        function handleSubmit(event) {
            event.preventDefault(); // Ngăn không cho form tự động submit
            const filledData = gatherFilledInputs();
            // Gửi filledData lên server bằng fetch hoặc form submission
            document.getElementById('scheduleForm').submit();
        }

        window.onload = function () {
            // Chỉ hiển thị ô input đầu tiên khi trang tải xong
            const inputs = document.querySelectorAll('.schedule-input');
            inputs.forEach((input, index) => {
                if (index !== 0) {
                    input.style.display = 'none';
                }
            });
        };
    </script>
</head>
<body>
    <h1>Add Schedule for Field ID: <span th:text="${session.sanId}"></span></h1>
    
    <form th:action="@{/addScheduleBooking}" id="scheduleForm" method="post" onsubmit="handleSubmit(event)">
        <!-- Các trường thông tin của ScheduleBooking -->
        <input type="hidden" name="sanId" th:value="${session.sanId}" />

        <div class="schedule-input">
            Start Time: <input type="time" name="startTime1"/><br/>
            End Time: <input type="time" name="endTime1"/><br/>
            Status: <input type="text" name="status1"/><br/>
            Price: <input type="number" name="price1"/><br/>
        </div>

        <!-- Tạo thêm các div cho các trường thông tin khác (24 tổng cộng) -->
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime2"/><br/>
            End Time: <input type="time" name="endTime2"/><br/>
            Status: <input type="text" name="status2"/><br/>
            Price: <input type="number" name="price2"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime3"/><br/>
            End Time: <input type="time" name="endTime3"/><br/>
            Status: <input type="text" name="status3"/><br/>
            Price: <input type="number" name="price3"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime4"/><br/>
            End Time: <input type="time" name="endTime4"/><br/>
            Status: <input type="text" name="status4"/><br/>
            Price: <input type="number" name="price4"/><br/>
        
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime5"/><br/>
            End Time: <input type="time" name="endTime5"/><br/>
            Status: <input type="text" name="status5"/><br/>
            Price: <input type="number" name="price5"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime6"/><br/>
            End Time: <input type="time" name="endTime6"/><br/>
            Status: <input type="text" name="status6"/><br/>
            Price: <input type="number" name="price6"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime7"/><br/>
            End Time: <input type="time" name="endTime7"/><br/>
            Status: <input type="text" name="status7"/><br/>
            Price: <input type="number" name="price7"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime8"/><br/>
            End Time: <input type="time" name="endTime8"/><br/>
            Status: <input type="text" name="status8"/><br/>
            Price: <input type="number" name="price8"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime9"/><br/>
            End Time: <input type="time" name="endTime9"/><br/>
            Status: <input type="text" name="status9"/><br/>
            Price: <input type="number" name="price9"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime10"/><br/>
            End Time: <input type="time" name="endTime10"/><br/>
            Status: <input type="text" name="status10"/><br/>
            Price: <input type="number" name="price10"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime11"/><br/>
            End Time: <input type="time" name="endTime11"/><br/>
            Status: <input type="text" name="status11"/><br/>
            Price: <input type="number" name="price11"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime12"/><br/>
            End Time: <input type="time" name="endTime12"/><br/>
            Status: <input type="text" name="status12"/><br/>
            Price: <input type="number" name="price12"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime13"/><br/>
            End Time: <input type="time" name="endTime13"/><br/>
            Status: <input type="text" name="status13"/><br/>
            Price: <input type="number" name="price13"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime14"/><br/>
            End Time: <input type="time" name="endTime14"/><br/>
            Status: <input type="text" name="status14"/><br/>
            Price: <input type="number" name="price14"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime15"/><br/>
            End Time: <input type="time" name="endTime15"/><br/>
            Status: <input type="text" name="status15"/><br/>
            Price: <input type="number" name="price15"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime16"/><br/>
            End Time: <input type="time" name="endTime16"/><br/>
            Status: <input type="text" name="status16"/><br/>
            Price: <input type="number" name="price16"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime17"/><br/>
            End Time: <input type="time" name="endTime17"/><br/>
            Status: <input type="text" name="status17"/><br/>
            Price: <input type="number" name="price17"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime18"/><br/>
            End Time: <input type="time" name="endTime18"/><br/>
            Status: <input type="text" name="status18"/><br/>
            Price: <input type="number" name="price18"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime19"/><br/>
            End Time: <input type="time" name="endTime19"/><br/>
            Status: <input type="text" name="status19"/><br/>
            Price: <input type="number" name="price19"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime20"/><br/>
            End Time: <input type="time" name="endTime20"/><br/>
            Status: <input type="text" name="status20"/><br/>
            Price: <input type="number" name="price20"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime21"/><br/>
            End Time: <input type="time" name="endTime21"/><br/>
            Status: <input type="text" name="status21"/><br/>
            Price: <input type="number" name="price21"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime22"/><br/>
            End Time: <input type="time" name="endTime22"/><br/>
            Status: <input type="text" name="status22"/><br/>
            Price: <input type="number" name="price22"/><br/>
        </div>
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime23"/><br/>
            End Time: <input type="time" name="endTime23"/><br/>
            Status: <input type="text" name="status23"/><br/>
            Price: <input type="number" name="price23"/><br/>
        </div>
        
        <div class="schedule-input">
            Start Time: <input type="time" name="startTime24"/><br/>
            End Time: <input type="time" name="endTime24"/><br/>
            Status: <input type="text" name="status24"/><br/>
            Price: <input type="number" name="price24"/><br/>
        </div>

        <!-- Thông tin ngày bắt đầu và ngày kết thúc -->
        Booking Date From : <input type="date" name="dateFrom" /><br/>
        Booking Date To : <input type="date" name="dateTo" /><br/>

        <input type="hidden" name="sanId" th:value="${sanId}" />

        <!-- Nút để hiển thị thêm các ô input -->
        <button type="button" onclick="showNextInput()">Add Another Schedule</button>

        <!-- Nút để submit form -->
        <button type="submit">Submit Schedule</button>
    </form>
</body>
</html>
